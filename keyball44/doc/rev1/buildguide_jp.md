# Build Guide for Keyball44

このガイドでは、Keyball44の組み立て手順を詳しく説明します。  
※Keyball44の白基板の写真をメインに説明していますが黒基板も同様の手順になります。  
黒基板セットのみ対応が必要な箇所は文頭に ⚫️ を付けています。

**English build guide for Keyball44 is [here](buildguide_en.md).**
  

![01](images/kb44_001.jpg)

## 【目次】

> **準備編**
 - [1. 部品確認](#anchor1)
   - [1-1. キット同梱品](#anchor11)
   - [1-2. 組立前にお客様自身で準備いただく部品](#anchor1-2)
   - [1-3. 組立後でも取り付けられる部品とオプション](#anchor1-3)
 - [2. 準備](#anchor2)
   - [2-1. 必要な工具](#anchor2-1)
   - [2-2. ファームウェア](#anchor2-2)

> **実装編**
 - [3. 実装](#anchor4)
   - [3-1. はんだ付けの前に](#anchor3-1)
   - [3-2. ダイオードの取り付け](#anchor3-2)
   - [3-3. LED（オプション）のはんだ付け](#anchor3-8)
   - [3-4. キーソケットのはんだ付け](#anchor3-3)
   - [3-5. ジャンパのはんだ付け](#anchor3-4)
   - [3-6. TRRSソケット・タクトスイッチ・4連ピンソケット](#anchor3-5)
   - [3-7. ProMicroのはんだ付け](#anchor3-6)
   - [3-8. ProMicroの書き込みと動作確認](#anchor3-7)
 - [4. トラックボール読み取り基板の組み立て](#anchor4)
   - [4-1. センサーのはんだ付け](#anchor4-1)
   - [4-2. L字コンスルーのはんだ付け](#anchor4-2)
 - [5. トッププレートのカット（オプション）](#anchor5)

> **組み立て編**
 - [6. 組み立て](#anchor6)
   - [6-1. 保護プレートの取り付け](#anchor6-1)
   - [6-2. トッププレートの組み立て](#anchor6-2)
   - [6-3. ボトムプレートの組み立て](#anchor6-3)
 - [7. トラックボール取り付け](#anchor7)
   - [7-1. ボール読み取り基板差し込み](#anchor7-1)
   - [7-2. トラックボールケースの組み立て](#anchor7-2)
   - [7-3. トラックボールケース装着](#anchor7-3)

> **仕上げ編**
 - [8. 総仕上げ](#anchor8)
 - [9. 正規ファームウェアの書き込み](#anchor9)
 - [10. Keyballの使い方♪](#anchor10)

<a id="anchor1"></a>
## 1. 部品確認

キットが届きましたらキット同梱品がすべて入っているかご確認ください。

<a id="anchor11"></a>
### 1-1. キット同梱品

標準セットは左右どちらかに1つ親指トラックボールを搭載できます。

左右両方にトラックボールを搭載するデュアルボール仕様や、左右両方トラックボール無しで組み立てることもできるように、片手のみのキットも販売しています。

片手セットやデュアルボールセットをご購入の場合は、キットに同封の部品リストにて同梱品をご確認ください。

 ⚠️ 12Pコンスルーの代わりにProMicro用ピンヘッダ＋ピンソケットが同梱されていた場合には、[【こちら】](https://github.com/Yowkees/keyball/blob/main/keyball44/doc/rev1/buildguide_jp_pinheader.md#1-1%E3%82%AD%E3%83%83%E3%83%88%E5%90%8C%E6%A2%B1%E5%93%81)のビルドガイドをご利用ください。


**Keyball44 標準キットの同梱品一覧**
| 部品名 | 数量 | 備考 |
|:-------|:----:|:-----|
| ミドルPCB(左右) | 1組 | メインボード |
| トップPCBプレート(左右) | 1組 | キースイッチ固定用 |
| ミドルアクリルプレート(左右)| 1組 | キースイッチ固定用 |
| ボトムアクリルプレート(左右) | 1組 | 底面カバー |
| ProMicro保護プレート | 2枚 | 基板保護用 |
| トラックボール保持ケース(上下) | 1組 | ボール固定用 |
| Φ2 セラミックボール | 1個 | 予備 |
| トラックボール読取り基板 | 1枚 | センサー基板 |
| L字コンスルーピン(7ピン) | 1個 | センサー接続用 |
| トラックボール読取りIC | 1個 | PMW3360 |
| 読取りIC用レンズ | 1個 | 光学レンズ |
| 平頭タップネジ M1.7 | 2本 | トラックボールケース固定用 |
| 小頭タップネジ M1.7 | 2本 | トラックボールケース同士の固定用 |
| TRRSジャック | 2個 | 左右接続用 |
| タクトスイッチ | 2個 | リセット用 |
| ストレートコンスルーピン(12ピン) | 4本 | ProMicro接続用 |
| ダイオード（表面実装タイプ） | 50個＋ | キーマトリクス誤認識防止用 |
| Kailh PCBソケット CherryMX用 | 44個＋ | キースイッチ用 |
| Kailh PCBソケット choc用| 5個 | 親指ロープロ改造時に使用 |
| OLEDモジュール | 2枚 | ディスプレイ |
| 4連ピンヘッダ  | 2つ | OLED接続用 |
| 4連ピンソケット | 2つ | OLED接続用 |
| スペーサー M2 7mm | 14本＋ | 標準スペーサー |
| スペーサー M2 9mm | 4本 | 高さ調整用 |
| スペーサー M2 4mm | 4本 | 親指ロープロ仕様で使用 |
| ネジ M2 3.5mm | 36本＋ | プレート固定用 |
| クッションゴム | 10個 | 底面の滑り止め用 |

![02](images/kb44_007.jpg)

<a id="anchor1-2"></a>
### 1-2. 組立前にお客様自身で準備いただく部品

以下の部品はキットに含まれていないため、別途ご購入いただく必要があります。

| 部品名 | 数量 | 備考 |
|:-------|:----:|:-----|
| ProMicro | 2個 | 安価なものやUSB Type-C対応のもの等選べます |
| CherryMX互換キースイッチ | 44個 | 親指ロープロ仕様なら39個 |
| ロープロファイルキースイッチ | 5個 | 親指ロープロ仕様とする場合のみ |
| 直径34mmトラックボール | 1個 | トラックボール使用時に必要 |
| TRS(3極)ケーブル | 1本 | TRRS(4極)ケーブルでも可 |
| Micro USBケーブル | 1本 | ご購入いただいたProMicroに対応するもの |

![03](images/kb44_003.jpg)

<a id="anchor1-3"></a>
### 1-3. 組立後でも取り付けられる部品とオプション

以下の部品は組み立て後に取り付けることができ、お好みに応じてカスタマイズできます。

| 部品名 | 数量 | 備考 |
|:-------|:----:|:-----|
| キーキャップ | 44個 | 1u 44個 |
| ロープロファイルキーキャップ | 5個 | 親指ロープロ仕様のみ　1u 5個 |
| YS-SK6812MINI-E | 59個 | ※SK6812MINIは使用できません |

![04](images/kb44_004.jpg)

<a id="anchor2"></a>
## 2. 準備

<a id="anchor2-1"></a>
### 2-1. 必要な工具

Keyball44の組み立てには下記の工具が必要です。すべて揃っているかご確認ください。

| 工具名 | 用途 |
|:-------|:-----|
| はんだごて(LEDを実装する場合は温度調整可能なもの) | はんだ付け作業 |
| はんだ(LEDを実装する場合は低融点のものが有効) | 接続用 |
| 0番＋精密ドライバー | ネジ締め用 |
| ピンセット | 部品取り扱い用 |
| カッター | トッププレート親指部パーツ切り離し用 |
| 150番手くらいの紙やすり | プレートを切り離した時の研磨用 |

![05](images/kb44_005.jpg)

<a id="anchor2-2"></a>
### 2-2. ファームウェア

Keyball44を動作させるには、ご購入いただいたProMicroへのファームウェアの書き込みが必要です。

 すでにビルド済みのファームウェアを、[REMAP](https://remap-keys.app/)というウェブ上のキーボード管理ソフトにて簡単に書き込みができます。
 
 書き込みについてはこの後の[3-7章](#anchor3-7)でテスト用のファームウェアの書き込み、[10章](#anchor10)で製品版ファームウェアの書き込みについて詳しく説明しています。

<a id="anchor4"></a>
## 3. 実装

ここからはんだ付け作業に入ります。 

 PCBはリバーシブルになっているので、最初にどちらを左手用/右手用にするか決めます。  
 右手親指でトラックボールを操作する場合は下写真の赤丸で示した、PCBが欠けている部分にトラックボールが付きます。    

![20](images/kb44_010.jpg)

左手親指でトラックボールを操作する場合は下記写真のような配置です。 

![21](images/kb44_011.jpg)

本ビルドガイドでは右手にトラックボール付ける仕様で説明します。  
>**⚡️ 注意**:裏表を間違えてはんだ付けをしてしまうとやり直しが非常に困難になります。  
>下記写真のようにミス防止のため表面にマスキングテープ等の目印を付けてください。。


![22](images/kb44_012.jpg)

⚫️ 黒基板セットの場合はお好みでトップPCBとミドルPCBの側面を黒のマーカーで塗りつぶしておくと仕上がりが綺麗になります。

![138](images/kb39_138.jpg)

<a id="anchor3-1"></a>
### 3-1. はんだ付けの前に
はんだごての"こて先"は竹槍の先端のような形状のものだと平面にはんだを乗せたり、余分なはんだを"すくい取る"事が出来るので使いやすいです。

![27](images/kb44_027.jpg)

<a id="anchor3-2"></a>
### 3-2. ダイオードの取り付け
それではダイオードを順にはんだ付けしていきます。  
ダイオードはすべて**裏面**にはんだ付けします。  
  
ダイオードのシルクマークは下写真の矢印で示したマークで、左右で合計46個あります。  
> **⚡️注意**: ダイオードには極性がありますので、正しい向きで取り付けてください。  
向きは部品上の直線とシルクマーク内の矢印の先についている直線が一致する方向です。  
> 下記写真をよく見て向きを確認してください。  
> 同一基板上のダイオードの向きはすべて同じ向きで配置されています。  
はんだ付けを進める中で回りのダイオードと同じ向きになっているか確認しながら行ってください。

![25](images/kb44_014.jpg)
  
ダイオードのシルクには下記写真の赤で示すような黒点があるのでダイオードのはんだ付け後にも極性確認ができます。

![26](images/kb44_015.jpg)

はんだ付け開始です。  
まずダイオード用パッドの片側にはんだを盛ります。

![28](images/kb44_020.jpg)

ピンセットでダイオードを掴み、事前に盛ったはんだを溶かしながらダイオードを固定します。

![30](images/kb44_028.jpg)

基板を180度回転させてダイオードの反対側の足にもはんだを流します。  
最後に両方の足をこて先で触り、ダイオードが脱落しなければ両足ともはんだ付けされています。

![反対の足もはんだ付け](images/kb44_029.jpg)

左右で合計46個のダイオードを取り付けます。

![37](images/kb44_030.jpg)

<a id="anchor3-3"></a>
### 3-3. LED（オプション）のはんだ付け
LED（YS-SK6812MINI-E）はオプションになります。  
左右で計59個取り付け可能です。  
ただしLEDは非常に熱に弱く、こて先温度を**220度～280度**に調整して行ってください。 
銀入りはんだ等の融点の低いハンダを使用すると良いです。  
こて先の温度が低いため、パッドに熱が伝わらずはんだがテンプラ（接続不良）しやすいです。  
LED無しでもキーボードは使用できますし、すべてのLEDを点灯させるのは難易度が高いです。  
まずはLEDなしで完成させることをおすすめします。後からでもLEDを追加できます。 

LEDをはんだ付けする場合にはこのタイミングで作業すると作業性が良いと思います。

LEDはすべて**裏面**にはんだ付けします。 
  
YS-SK6812MINI-Eの4ピンのうち切り欠きがある足と、マーキングされているパッドを合わせてLEDを載せてはんだ付けします。

LEDには上向きと下向きに付けるものが混在しますが、下写真のようにピンの切り欠きとマーキングを合わせると自動的に上下が合います。

一度に4ピンすべてのはんだ付けをすると部品の温度が上がり壊れやすいので、2ピンづつを目安に時間を空けながらはんだ付けしてください。  
そのために10個ほどのLEDを一度に載せて、一度はんだを当てたら次のLEDのはんだ付けに移るようにします。  
こうすると1つのLEDに熱を加え続けることを防げます。

![80](images/kb44_070.jpg)

全てのLEDがはんだ付けが完了したら次の工程へ進めます。  
後ほどLEDの点灯確認を行います。

![82](images/kb44_073.jpg)

<a id="anchor3-4"></a>
### 3-4. キーソケットのはんだ付け
キーソケットはダイオードと同様にすべて**裏面**にはんだ付けします。  
シルクマークと形状が合うようにセットしてはんだ付けします。  

>**⚡️注意**:シルクからはみ出すようであれば方向が違います。  
>正しい向きを下記写真で確認してください。

![85](images/kb44_075.jpg)

親指キーをロープロ仕様で組み立てる場合は、親指キーとなる箇所（左右で5キー）にロープロファイル用ソケットをはんだ付けして下さい。  
このロープロソケットにも向きがあります。

下記写真のように黒い樹脂部分が八角形のような形の端子をスイッチの中心付近に配置します。

![85](images/kb44_077.jpg)

はんだ付けは青丸で示すように事前にソケット用パッドの片側にはんだを盛っておきます。

![86](images/kb39_078.jpg)

ソケットをはめて上からピンセットで抑えて端子の横からはんだを少し載せたこて先を当てると、はんだが溶けてソケットが沈み込みます。  
経験上、この方法が一番テンプラ（接続不良）しにくいです。  

![87](images/kb39_079.jpg)

基板を180度回転させて反対側の端子もはんだ付けします。

左右合わせて44個はんだ付けして完了です。  
親指キーのPCBソケットはCherryMX互換ソケットかロープロソケットのどちらかだけでも構いません。  
※写真では両方付けています。

![89](images/kb44_081.jpg)
<a id="anchor3-5"></a>
### 3-5. ジャンパのはんだ付け
OLEDモジュールを動作させるためにジャンパをショートさせる必要があります。

>**⚡️注意**:ジャンパのはんだ付けは**裏面のみ**に行います。  
"Back Side Only"の表示があり、左右の基板に各【4個ずつ】あります。  
パッドをこて先で温めてから、はんだを溶かすとブリッジできます。

![41](images/kb44_035.jpg)

はんだ付けに自信が無い方やブリッジ作業が苦手な方は、下記写真のようにまずは8個のパッドにはんだを付ける事を行ってみてください。

![40b](images/kb61_037.jpg)

ここにはんだを追加することで、楽にブリッジさせられると思います。

![40b](images/kb61_038.jpg)

はんだの鮮度が落ちる（何度も温め直す）と表面張力が落ちてうまくブリッジできません。  
一度はんだを払ってしまい、はんだやフラックスを足してやり直してください。  
左右とも、計8か所をブリッジします。

次にトラックボール用信号線のジャンパをショートさせます。  
下記写真の位置にある4個のジャンパを写真のようにはんだ付けしてください。  
これも**裏面**のみ行います。

![40b](images/kb44_037.jpg)

最後に左手判定ジャンパをショートさせます。  
下記写真のように左手とする側の小指キー付近に**LEFT**の表示があるジャンパが1つあります。  
これも**裏面**のみショートさせてください。

![40b](images/kb44_038.jpg)

全てのジャンパのはんだ付けが完了したのが下記写真です。  
4つの青丸部分が全てはんだ付けしてあるか確認してください。

![40b](images/kb44_039.jpg)

<a id="anchor3-6"></a>
### 3-6. TRRSソケット・タクトスイッチ・4連ピンソケット
下記写真の部品をはんだ付けします。  
>**⚡️注意**:今度はすべて**表面のみ**に取付けますのでご注意ください。  

![51](images/kb44_040.jpg)

部品が浮いてしまうのが心配であれば、マスキングテープ等で固定してはんだ付けします。

![52](images/kb44_041.jpg)

すべて取り付けると下写真のようになります。

![53](images/kb44_042.jpg)

裏面のはんだ付けした状態の写真です。

![53](images/kb44_044.jpg)

<a id="anchor3-7"></a>
### 3-7. ProMicroのはんだ付け
ProMicroは下記写真のコンスルーピンを使用してはんだ付けすることで、ProMicroの故障時に交換が容易になります。  
コンスルーピンには取付け方向がありますので写真をよく見て作業してください。

>⚠️ 12Pコンスルーの代わりにProMicro用ピンヘッダ＋ピンソケットが同梱されていた場合には、[【こちら】](https://github.com/Yowkees/keyball/blob/main/keyball44/doc/rev1/buildguide_jp_pinheader.md#3-6promicro%E3%81%AE%E3%81%AF%E3%82%93%E3%81%A0%E4%BB%98%E3%81%91)のビルドガイドをご利用ください。

![60](images/kb44_050.jpg)

まずコンスルーピンを基板【表面】に差し込みます。

**シルクの四角枠**に合うようにコンスルーを差し込んでください。  
シルクの黒枠がコンスルーとずれているようであれば差し込む穴が間違っています。

![61](images/kb44_056.jpg)

差し込んだコンスルーピンにProMicroを挿入します。  
しっかり最後まで差し込んだ状態で**ProMicro側のみ**はんだ付けします。  
基板に差し込んだ状態ではんだ付けすることで、コンスルーピンが斜めに取り付けられてしまうことを防げます。
>**⚡️注意**:コンスルーピンをミドルPCB側にもはんだ付けしてしまうとProMicro故障時に取り替えが非常に困難になります。

![63](images/kb44_060.jpg)

左右の基板には標準でOLEDが搭載できます。  
4連ピンソケットに4連ピンヘッダを挿入してOLEDモジュールを載せます。
そして、4ピンのうちの**1つだけ**をはんだ付けします。  

1つだけはんだ付けしたピンのはんだを溶かしながらOLEDモジュールを上から押して浮かないようにします。  
またProMicroと並行になるように調整すると見栄えが良くなります。

位置が決まったら残り3ピンをはんだ付けします。

![70](images/kb44_062.jpg)




<a id="anchor3-8"></a>
### 3-8. ProMicroの書き込みと動作確認
テスト用のファームウェアをProMicroに書き込みましょう。   
テスト用ファームウェアは動作確認がしやすいキーマップ配置であることに加え、LEDが赤→緑→青と順に点灯するので、不具合箇所を発見しやすいです。  
LEDのはんだ付けを見送っている場合など、テスト用ファームウェアが必要無い方は[10章](#anchor10)の正規のファームウェアをここで書き込んでも構いません。


Keyball44のファームウェアは、トラックボールを左右どちら側に載せた場合でも共通です。  
REMAPに登録してある[Keyball_test.hex](https://remap-keys.app/catalog/k895xiCpsM5zlYZCPTEN/firmware) を書き込み(FLASH)してください。  
上記リンクにあるFLASHボタンを押すと、書き込み方法の説明が表示されます。  
USBケーブルを接続しているのにキーボードが認識されない場合は、はんだ付けしたRESETスイッチを素早く2回押すと認識されると思います。  
※必ず左右両方のPro Microに同じhexファイルを書き込んでください。

  Keyball44のファームウェアを直接編集してご自身でビルドしたい場合は、 [こちらのリポジトリ](https://github.com/Yowkees/keyball/tree/main/qmk_firmware/keyboards/keyball)にソースファイルがありますのでダウンロードしてご活用ください。


書き込みが完了したら下写真のようにキースイッチのパッドをピンセットでショートしてテキストエディタに文字が入力されることを確認します。 
キーボードの左右が反転している場合がありますが、現状は問題ありません。  
ひとまず何かしらの文字が入力されてProMicroが動作しているかだけご確認ください。  
すべてのキーを試す必要はまだありませんが、早い段階で動作確認をすることで問題の切り分けが楽になります。  
※ファームウェアの書き込みは必ず左右両方のPro Microに対して行ってください。  

このタイミングでLEDの点灯確認も行います。  
LEDは直列に配線されているので、途中までしか光らない場合の不具合箇所の特定がしやすいです。

例えば12番のLEDまでは点灯したが、13番以降のLED以降が点灯しない場合、【12番か13番】のLEDのはんだ付けに問題がある可能性が高いのでそれらのLEDのはんだ付けをやり直してください。  
それでも改善しない場合はLEDの故障が考えられるので13番のLEDを交換してください。

点灯確認とはんだ付け修正を繰り返して、すべてのLEDが点灯するようにします。

![75](images/kb44_067.jpg)

<a id="anchor4"></a>
## 4. トラックボール読み取り基板の組み立て
下写真の基板（以下、ボール基板）と光学センサーを準備します。

※センサーや基板の品質確認のため、はんだ付け済のボール基板が届く場合があります。  
その際はこの工程を飛ばして、[4-2章](#anchor4-2)のL字コンスルーはんだ付けに進んでください。

![90](images/kb44_090.jpg)  

<a id="anchor4-1"></a>
### 4-1. センサーのはんだ付け  

センサーICはボール基板の部品が実装されていない裏面から差し込みます。  
>**⚡️注意**:センサーの極性を間違えると、修理がとても大変です！  
正しい向きで、正しい方向から挿入しているかしっかりと確認してからはんだ付けしてください！  
ICの１ピンを示すくぼみと基板の【1pin】のシルクを合わせます。

![91](images/kb44_091.jpg)

ICを裏から見るとこのような方向です。  
表面実装部品が実装されている表面側（Keyballロゴの無い面側）から全ピンをはんだ付けしてください。

![92](images/kb44_092.jpg)

ピンセットを使って保護シール【２枚】をはがします。

![93](images/kb44_093.jpg)

保護シールをはがした面側にセンサーレンズを取り付けます。  
レンズには方向があり、方向が違うとレンズの細いピン2本が折れてしまう恐れがあるため方向をしっかりとご確認ください。  
レンズ手前に下記写真の矢印のような突起があり、これが上側にくるように取り付けます。

![95](images/kb44_095.jpg)

レンズとICの方向が合えば、レンズのピン2本がICに無理なく差し込めるはずです。ゆっくりと差し込んでください。

![94](images/kb44_094.jpg)

<a id="anchor4-2"></a>
### 4-2. L字コンスルーのはんだ付け
次にL字コンスルーピンをトラックボールを搭載する基板の**表面**に取付けます。  
L字コンスルーにも方向があります。
ピンがU字型になっていない方をミドル基板に差し込んではんだ付けします。

![96](images/kb44_083.jpg)

部品が浮かないようにマスキングテープ等を貼って裏面からはんだ付けしてください。

![97](images/kb44_084.jpg)

裏面から7ピンのはんだ付けをします。

![97](images/kb44_085.jpg)

以上ではんだ付け作業は完了です。

余談ですがはんだごての電気を落とす前に、こて先にたっっぷりとはんだを付けておきましょう。次回使用するときにこのはんだを落とせば、ピカピカのこて先で作業を再開できますよ！

![100](images/kb44_096.jpg)

<a id="anchor5"></a>
## 5. トッププレートのカット（オプション）

Keyball44は親指キー5個をchocロープロファイルスイッチに切り替えることが可能です。  
その場合は親指キー部分のプレートの高さが変わるのでトッププレートのミシン目を切り離す必要があります。  

切り離す場合はカッターを使用して表面と裏面のミシン目部分に切り込みを入れてから折って切り離します。

親指キーを通常のCherry MXスイッチにする場合には基板を切り離す必要はありませんが、両方使用したい場合は切り離しておくことをおすすめいたします。

![101](images/kb44_100.jpg)

切り離した断面は150番手くらいの紙やすりで整えてください。

![102](images/kb44_102.jpg)

<a id="anchor6"></a>
## 6. 組み立て 

<a id="anchor6-1"></a>
### 6-1. 保護プレートの取り付け

ミドル基板にProMicro保護プレートを取り付けます。
まず9mmスペーサをネジ止めします。

![110](images/kb44_104.jpg)

アクリル保護プレートをスペーサにネジ止めします。

トラックボール有側も無側も保護プレートの形状は共通です。表裏もありません。  

![111](images/kb44_105.jpg)  

<a id="anchor6-2"></a>
### 6-2. トッププレートの組み立て

トッププレートの**裏面**に7mmスペーサをネジ止めします。  

親指キーをロープロファイル仕様で組み立てる場合は、親指キー用トッププレートに4mmスペーサを取り付けます。

![112](images/kb44_107.jpg)

トッププレートの四隅と親指用プレートにキースイッチをはめ込みます。

こうしておくとプレート同士の位置決め精度が上がります。

![113](images/kb44_108.jpg)

トッププレートとミドルアクリルプレートのネジ穴を合わせ、プレート同士を重ねます。

![114](images/kb44_110.jpg)

次に半田付けしたミドル基板もネジ穴を合わせ、キースイッチの端子がしっかりキーソケットに入ることを確認しながら重ねます。

![114](images/kb44_112.jpg)

<a id="anchor6-3"></a>
### 6-3. ボトムプレートの組み立て

アクリルボトムプレートの保護シートを剥がし、本体裏面に重ねてネジ止めします。  
次にキーボード裏の四隅にクッションゴムを張り付けてください。

![114](images/kb44_116.jpg)

<a id="anchor7"></a>
## 7. トラックボール取り付け 

<a id="anchor7-1"></a>
### 7-1. ボール読み取り基板差し込み

組み立てたトラックボール読み取り基板を７ピンコンスルーへ差し込みます。  
わかりやすいように斜めにしていますが、基板は垂直にして差し込みます。

![120](images/kb44_114.jpg)

ボール基板が垂直に立ちました。

![121](images/kb44_115.jpg)

<a id="anchor7-2"></a>
### 7-2. トラックボールケースの組み立て

トラックボールケースには事前にセラミックボール3個が固定されています。  
万が一セラミックボールが脱落している場合にはお手数ですが予備のセラミックボールを適当なボンドで固定してください。  
セラミックボールの予備は今後ボールを紛失した時のために保管しておいてください。

ケースを振ってみて、セラミックボールが脱落しないか確認してください。

![122](images/kb44_122.jpg)

ケース下の穴へ、ケース上のピン２本が挿入できます。  
上下からゆっくり力を入れて結合します。（ぴったりと結合しなくてもこの後のネジ絞めでくっつきますので大丈夫です。）

![123](images/kb44_123.jpg)

M1.7のタッピングネジを付けます。  
キットには**頭の小さなネジ**と**頭の平らなネジ**が同梱されていますが、**頭の小さなネジ**を使用します。  

![124](images/kb44_124.jpg)

ケース裏から見て、この２個所をネジ止めします。
>**⚡️注意**:締め付けすぎにご注意ください。

![125](images/kb44_125.jpg)

<a id="anchor7-3"></a>
### 7-3. トラックボールケース装着

完成したケースを本体に取付けます。  
ケース裏側のセンサー収納部にボール基板が入ります。  
矢印で示すボール基板がケース中央くらいにくるようにしながら、上からゆっくりとはめます。  
引っ掛かりがある場合は無理に押し込まず、一度引き抜いて再度入れ直してください。

それほど力を入れなくても最後まで入るはずです。

![126](images/kb44_127.jpg)

本体裏から確認するとメイン基板とボール基板の間に、矢印で示すような隙間が出来ている場合があります。

![128](images/kb44_129.jpg)

その時は、軽～くケース手前（指マークの方向）から押します。  
力を入れすぎるとL字コンスルーが破損する可能性があるので、やさしく押してください。  
下写真のように隙間がなくなれば、青丸部のネジ穴が合うと思います。

![129](images/kb44_130.jpg)

キットに同梱のM1.7トルクスネジの**頭が平らなネジ**２本を本体裏から絞めます。  
この時ボール保持ケースが回転しないように指で抑えながらネジを絞めてください。

![130](images/kb44_132.jpg)

<a id="anchor8"></a>
## 8. 総仕上げ 

完成間近です！お好みのキースイッチとキーキャップをはめ込んでいきます。

最後に34mmトラックボールをケースに押し込んで完成です！  
お疲れ様でした。  

![132](images/kb44_135.jpg)

![keyball44完成品](images/kb44_136.jpg)

<a id="anchor9"></a>
## 9. 正規ファームウェアの書き込み 

それでは最後に正規のファームウェアをProMicroに書き込みましょう。

Keyball44は[ReMAP](https://remap-keys.app/configure)に対応していますので特別なソフトをインストールしなくてもファームウェアの書き込みとキーマップの変更が可能です。Remapの使用方法については[自キ温泉ガイドのサリチル酸](https://salicylic-acid3.hatenablog.com/entry/remap-manual)の記事に詳しく掲載されています。  

ReMAPを使用するために[REMAPカタログのKeyball44ファームウェアページ](https://remap-keys.app/catalog/k895xiCpsM5zlYZCPTEN/firmware)を開き、Keyball44_viaのファームウェアをFLASH（書き込み）してください。




書き込みは[3-7章](#anchor3-7)でも書いた通り、FLASHボタンを押すと、書き込み方法の説明が表示されます。
USBケーブルを接続しているのにキーボードが認識されない場合は、はんだ付けしたRESETスイッチを素早く2回押すと認識されると思います。

>**⚡️注意**:必ず左右両方のPro Microに同じhexファイルを書き込んでください。

**ご自身でファームウェアをビルドする場合**   
Keyball44の最新ファームウェアは[Githubのリポジトリ](https://github.com/Yowkees/keyball/tree/main/qmk_firmware/keyboards/keyball)にて公開しています。  
このkeyballフォルダをお手持ちのQMK_Firmware/keyboardsへコピーして自由にキーマップ等を編集してmakeしてください。  


<a id="anchor10"></a>
## 10. Keyballの使い方♪ 
   - トラックボールはレイヤー３に切り替わっている間は[上下左右スクロール](../../../qmk_firmware/keyboards/keyball/lib/keyball/README.md#scroll-snap-spec)に変わります。

   - [ReMAP](https://remap-keys.app/configure)で簡単にキーマップの確認・変更・書込みが可能です。

   - USBケーブルは左右どちらに差しても使用できます。  
   ただしキーマップはUSBケーブルを差した側のProMicroへ書き込まれるため、初めて差し替えた場合はキーマップを見直してください。

   - Keyballシリーズ用に特別に用意されたキーコードがレイヤー３に配置されています。  
   トラックボールをスクロールに変化させたり、カーソル速度やスクロール速度変更に使用できます。  
   詳しくは [キーコード一覧](../../../qmk_firmware/keyboards/keyball/lib/keyball/keycodes.md#japanese) を参照してください。




   >**⚡️注意**:KeyballとPCを接続した状態（電源が入った状態）でTRSケーブルを抜くと故障の原因となります。  
   TRSケーブルを抜き挿しする際は必ず先にUSBケーブルを抜いてから行ってください。

以上でKeyball44のビルドガイドは終了です。  
Keyball44についてのご質問や不具合等についてはGithubのリポジトリ、[Yowkees/keyballのDiscussions](https://github.com/Yowkees/keyball/discussions)へご投稿ください。  
なるべく早くご回答させていただきます。

―謝辞―  
Keyball44のファームウェアは、[KoRoN@香り屋様](https://www.kaoriya.net/)の多大なるご協力のおかげでトラックボールの動作が大幅にスムーズになったことに加え、メモリ容量の大幅な削減によりとてもたくさんのLEDアクションが楽しめます。このような素晴らしいファームウェアをスピーディに作成していただき、とてもスムーズにKeyball44の販売を開始することができました。この場を借りて深くお礼させていただきます。本当にありがとうございました。
　@Yowkees
